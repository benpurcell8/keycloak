/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
 Kirill, Fomichev 2014
 @license MIT
 Hakes, Taylor 2014
 @license MIT
*/
(function(I,J){if("object"===typeof exports)"object"===typeof module?module.exports=J(require("js-sha256"),require("base64-js")):exports.keycloak=J(require("js-sha256"),require("base64-js"));else{!function(){function m(b,a){a?(r[0]=r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0,this.blocks=r):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];b?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=
1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225);this.block=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=!1;this.first=!0;this.is224=b}function w(b,a,d){var z;z=typeof b;if("string"===z){var e,y=[],k=b.length,c=0;for(z=0;z<k;++z)128>(e=b.charCodeAt(z))?y[c++]=e:2048>e?(y[c++]=192|e>>6,y[c++]=128|63&e):55296>e||57344<=e?(y[c++]=224|e>>12,y[c++]=128|
e>>6&63,y[c++]=128|63&e):(e=65536+((1023&e)<<10|1023&b.charCodeAt(++z)),y[c++]=240|e>>18,y[c++]=128|e>>12&63,y[c++]=128|e>>6&63,y[c++]=128|63&e);b=y}else{if("object"!==z)throw Error(l);if(null===b)throw Error(l);if(B&&b.constructor===ArrayBuffer)b=new Uint8Array(b);else if(!(Array.isArray(b)||B&&ArrayBuffer.isView(b)))throw Error(l);}64<b.length&&(b=(new m(a,!0)).update(b).array());e=[];y=[];for(z=0;64>z;++z)k=b[z]||0,e[z]=92^k,y[z]=54^k;m.call(this,a,d);this.update(y);this.oKeyPad=e;this.inner=!0;
this.sharedMemory=d}var l="input is invalid type",x="object"==typeof window,q=x?window:{};q.JS_SHA256_NO_WINDOW&&(x=!1);var x=!x&&"object"==typeof self,t=!q.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;t?q=global:x&&(q=self);var x=!q.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,p="function"==typeof define&&define.amd,B=!q.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),h=[-2147483648,8388608,32768,
128],d=[24,16,8,0],c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,
3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=["hex","array","digest","arrayBuffer"],r=[];!q.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)});!B||!q.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(b){return"object"==typeof b&&b.buffer&&
b.buffer.constructor===ArrayBuffer});var n=function(b,a){return function(d){return(new m(a,!0)).update(d)[b]()}},P=function(b){var a=n("hex",b);t&&(a=Q(a,b));a.create=function(){return new m(b)};a.update=function(b){return a.create().update(b)};for(var d=0;d<g.length;++d){var c=g[d];a[c]=n(c,b)}return a},Q=function(b,a){var d=eval("require('crypto')"),c=eval("require('buffer').Buffer"),e=a?"sha224":"sha256";return function(a){if("string"==typeof a)return d.createHash(e).update(a,"utf8").digest("hex");
if(null===a||void 0===a)throw Error(l);return a.constructor===ArrayBuffer&&(a=new Uint8Array(a)),Array.isArray(a)||ArrayBuffer.isView(a)||a.constructor===c?d.createHash(e).update(new c(a)).digest("hex"):b(a)}},D=function(b,a){return function(d,c){return(new w(d,a,!0)).update(c)[b]()}},H=function(b){var a=D("hex",b);a.create=function(a){return new w(a,b)};a.update=function(b,d){return a.create(b).update(d)};for(var d=0;d<g.length;++d){var c=g[d];a[c]=D(c,b)}return a};m.prototype.update=function(b){if(!this.finalized){var a,
c=typeof b;if("string"!==c){if("object"!==c)throw Error(l);if(null===b)throw Error(l);if(B&&b.constructor===ArrayBuffer)b=new Uint8Array(b);else if(!(Array.isArray(b)||B&&ArrayBuffer.isView(b)))throw Error(l);a=!0}for(var g,e=0,r=b.length,k=this.blocks;e<r;){if(this.hashed&&(this.hashed=!1,k[0]=this.block,k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0),a)for(c=this.start;e<r&&64>c;++e)k[c>>2]|=b[e]<<d[3&c++];else for(c=this.start;e<r&&64>c;++e)128>(g=b.charCodeAt(e))?
k[c>>2]|=g<<d[3&c++]:2048>g?(k[c>>2]|=(192|g>>6)<<d[3&c++],k[c>>2]|=(128|63&g)<<d[3&c++]):55296>g||57344<=g?(k[c>>2]|=(224|g>>12)<<d[3&c++],k[c>>2]|=(128|g>>6&63)<<d[3&c++],k[c>>2]|=(128|63&g)<<d[3&c++]):(g=65536+((1023&g)<<10|1023&b.charCodeAt(++e)),k[c>>2]|=(240|g>>18)<<d[3&c++],k[c>>2]|=(128|g>>12&63)<<d[3&c++],k[c>>2]|=(128|g>>6&63)<<d[3&c++],k[c>>2]|=(128|63&g)<<d[3&c++]);this.lastByteIndex=c;this.bytes+=c-this.start;64<=c?(this.block=k[16],this.start=c-64,this.hash(),this.hashed=!0):this.start=
c}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes%=4294967296),this}};m.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var b=this.blocks,a=this.lastByteIndex;b[16]=this.block;b[a>>2]|=h[3&a];this.block=b[16];56<=a&&(this.hashed||this.hash(),b[0]=this.block,b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0);b[14]=this.hBytes<<3|this.bytes>>>29;b[15]=this.bytes<<3;this.hash()}};m.prototype.hash=function(){var b,
a,d,g,e,r,k,n=this.h0,h=this.h1,q=this.h2,l=this.h3,m=this.h4,p=this.h5,t=this.h6,f=this.h7,u=this.blocks;for(b=16;64>b;++b)a=((e=u[b-15])>>>7|e<<25)^(e>>>18|e<<14)^e>>>3,d=((e=u[b-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10,u[b]=u[b-16]+a+u[b-7]+d<<0;k=h&q;for(b=0;64>b;b+=4)this.first?(this.is224?(r=300032,f=(e=u[0]-1413257819)-150054599<<0,l=e+24177077<<0):(r=704751109,f=(e=u[0]-210244248)-1521486534<<0,l=e+143694565<<0),this.first=!1):(a=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),g=(r=n&h)^n&q^k,f=
l+(e=f+((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&p^~m&t)+c[b]+u[b])<<0,l=e+(a+g)<<0),a=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),g=(k=l&n)^l&h^r,t=q+(e=t+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&m^~f&p)+c[b+1]+u[b+1])<<0,a=((q=e+(a+g)<<0)>>>2|q<<30)^(q>>>13|q<<19)^(q>>>22|q<<10),g=(d=q&l)^q&n^k,p=h+(e=p+((t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7))+(t&f^~t&m)+c[b+2]+u[b+2])<<0,a=((h=e+(a+g)<<0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),g=(k=h&q)^h&l^d,m=n+(e=m+((p>>>6|p<<26)^(p>>>11|
p<<21)^(p>>>25|p<<7))+(p&t^~p&f)+c[b+3]+u[b+3])<<0,n=e+(a+g)<<0;this.h0=this.h0+n<<0;this.h1=this.h1+h<<0;this.h2=this.h2+q<<0;this.h3=this.h3+l<<0;this.h4=this.h4+m<<0;this.h5=this.h5+p<<0;this.h6=this.h6+t<<0;this.h7=this.h7+f<<0};m.prototype.hex=function(){this.finalize();var b=this.h0,c=this.h1,d=this.h2,g=this.h3,e=this.h4,n=this.h5,k=this.h6,h=this.h7,b=a[b>>28&15]+a[b>>24&15]+a[b>>20&15]+a[b>>16&15]+a[b>>12&15]+a[b>>8&15]+a[b>>4&15]+a[15&b]+a[c>>28&15]+a[c>>24&15]+a[c>>20&15]+a[c>>16&15]+a[c>>
12&15]+a[c>>8&15]+a[c>>4&15]+a[15&c]+a[d>>28&15]+a[d>>24&15]+a[d>>20&15]+a[d>>16&15]+a[d>>12&15]+a[d>>8&15]+a[d>>4&15]+a[15&d]+a[g>>28&15]+a[g>>24&15]+a[g>>20&15]+a[g>>16&15]+a[g>>12&15]+a[g>>8&15]+a[g>>4&15]+a[15&g]+a[e>>28&15]+a[e>>24&15]+a[e>>20&15]+a[e>>16&15]+a[e>>12&15]+a[e>>8&15]+a[e>>4&15]+a[15&e]+a[n>>28&15]+a[n>>24&15]+a[n>>20&15]+a[n>>16&15]+a[n>>12&15]+a[n>>8&15]+a[n>>4&15]+a[15&n]+a[k>>28&15]+a[k>>24&15]+a[k>>20&15]+a[k>>16&15]+a[k>>12&15]+a[k>>8&15]+a[k>>4&15]+a[15&k];return this.is224||
(b+=a[h>>28&15]+a[h>>24&15]+a[h>>20&15]+a[h>>16&15]+a[h>>12&15]+a[h>>8&15]+a[h>>4&15]+a[15&h]),b};m.prototype.toString=m.prototype.hex;m.prototype.digest=function(){this.finalize();var b=this.h0,a=this.h1,c=this.h2,d=this.h3,g=this.h4,n=this.h5,h=this.h6,r=this.h7,b=[b>>24&255,b>>16&255,b>>8&255,255&b,a>>24&255,a>>16&255,a>>8&255,255&a,c>>24&255,c>>16&255,c>>8&255,255&c,d>>24&255,d>>16&255,d>>8&255,255&d,g>>24&255,g>>16&255,g>>8&255,255&g,n>>24&255,n>>16&255,n>>8&255,255&n,h>>24&255,h>>16&255,h>>
8&255,255&h];return this.is224||b.push(r>>24&255,r>>16&255,r>>8&255,255&r),b};m.prototype.array=m.prototype.digest;m.prototype.arrayBuffer=function(){this.finalize();var b=new ArrayBuffer(this.is224?28:32),a=new DataView(b);return a.setUint32(0,this.h0),a.setUint32(4,this.h1),a.setUint32(8,this.h2),a.setUint32(12,this.h3),a.setUint32(16,this.h4),a.setUint32(20,this.h5),a.setUint32(24,this.h6),this.is224||a.setUint32(28,this.h7),b};w.prototype=new m;w.prototype.finalize=function(){if(m.prototype.finalize.call(this),
this.inner){this.inner=!1;var b=this.array();m.call(this,this.is224,this.sharedMemory);this.update(this.oKeyPad);this.update(b);m.prototype.finalize.call(this)}};var A=P();A.sha256=A;A.sha224=P(!0);A.sha256.hmac=H();A.sha224.hmac=H(!0);x?module.exports=A:(q.sha256=A.sha256,q.sha224=A.sha224,p&&define(function(){return A}))}();(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:
"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).base64js=m()})(function(){return function(){function m(w,l,x){function q(p,a){if(!l[p]){if(!w[p]){var h="function"==typeof require&&require;if(!a&&h)return h(p,!0);if(t)return t(p,!0);a=Error("Cannot find module '"+p+"'");throw a.code="MODULE_NOT_FOUND",a;}a=l[p]={exports:{}};w[p][0].call(a.exports,function(a){return q(w[p][1][a]||a)},a,a.exports,m,w,l,x)}return l[p].exports}for(var t="function"==typeof require&&require,p=0;p<
x.length;p++)q(x[p]);return q}return m}()({"/":[function(m,w,l){function x(a){var h=a.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=h);return[a,a===h?0:4-a%4]}function q(a,h,d){for(var c=[],g=h;g<d;g+=3)h=(a[g]<<16&16711680)+(a[g+1]<<8&65280)+(a[g+2]&255),c.push(t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]);return c.join("")}l.byteLength=function(a){a=x(a);var h=a[1];return 3*(a[0]+h)/4-h};l.toByteArray=function(a){var h,d=x(a);h=d[0];for(var d=
d[1],c=new B(3*(h+d)/4-d),g=0,r=0<d?h-4:h,n=0;n<r;n+=4)h=p[a.charCodeAt(n)]<<18|p[a.charCodeAt(n+1)]<<12|p[a.charCodeAt(n+2)]<<6|p[a.charCodeAt(n+3)],c[g++]=h>>16&255,c[g++]=h>>8&255,c[g++]=h&255;2===d&&(h=p[a.charCodeAt(n)]<<2|p[a.charCodeAt(n+1)]>>4,c[g++]=h&255);1===d&&(h=p[a.charCodeAt(n)]<<10|p[a.charCodeAt(n+1)]<<4|p[a.charCodeAt(n+2)]>>2,c[g++]=h>>8&255,c[g++]=h&255);return c};l.fromByteArray=function(a){for(var h=a.length,d=h%3,c=[],g=0,r=h-d;g<r;g+=16383)c.push(q(a,g,g+16383>r?r:g+16383));
1===d?(a=a[h-1],c.push(t[a>>2]+t[a<<4&63]+"\x3d\x3d")):2===d&&(a=(a[h-2]<<8)+a[h-1],c.push(t[a>>10]+t[a>>4&63]+t[a<<2&63]+"\x3d"));return c.join("")};var t=[],p=[],B="undefined"!==typeof Uint8Array?Uint8Array:Array;for(m=0;64>m;++m)t[m]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(m)]=m;p[45]=62;p[95]=63},{}]},{},[])("/")});!function(m,w){"object"==typeof exports&&"undefined"!=typeof module?w():
"function"==typeof define&&define.amd?define(w):w()}(0,function(){function m(a){var c=this.constructor;return this.then(function(d){return c.resolve(a()).then(function(){return d})},function(d){return c.resolve(a()).then(function(){return c.reject(d)})})}function w(){}function l(a){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];B(a,
this)}function x(a,c){for(;3===a._state;)a=a._value;0!==a._state?(a._handled=!0,l._immediateFn(function(){var d=1===a._state?c.onFulfilled:c.onRejected;if(null!==d){var h;try{h=d(a._value)}catch(n){return void t(c.promise,n)}q(c.promise,h)}else(1===a._state?q:t)(c.promise,a._value)})):a._deferreds.push(c)}function q(a,c){try{if(c===a)throw new TypeError("A promise cannot be resolved with itself.");if(c&&("object"==typeof c||"function"==typeof c)){var d=c.then;if(c instanceof l)return a._state=3,a._value=
c,void p(a);if("function"==typeof d)return void B(function(a,c){return function(){a.apply(c,arguments)}}(d,c),a)}a._state=1;a._value=c;p(a)}catch(r){t(a,r)}}function t(a,c){a._state=2;a._value=c;p(a)}function p(a){2===a._state&&0===a._deferreds.length&&l._immediateFn(function(){a._handled||l._unhandledRejectionFn(a._value)});for(var c=0,d=a._deferreds.length;d>c;c++)x(a,a._deferreds[c]);a._deferreds=null}function B(a,c){var d=!1;try{a(function(a){d||(d=!0,q(c,a))},function(a){d||(d=!0,t(c,a))})}catch(r){d||
(d=!0,t(c,r))}}var a=setTimeout;l.prototype["catch"]=function(a){return this.then(null,a)};l.prototype.then=function(a,c){var d=new this.constructor(w);return x(this,new function(a,c,d){this.onFulfilled="function"==typeof a?a:null;this.onRejected="function"==typeof c?c:null;this.promise=d}(a,c,d)),d};l.prototype["finally"]=m;l.all=function(a){return new l(function(c,d){function h(a,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var l=n.then;if("function"==typeof l)return void l.call(n,function(b){h(a,
b)},d)}g[a]=n;0==--p&&c(g)}catch(b){d(b)}}if(!a||"undefined"==typeof a.length)return d(new TypeError("Promise.all accepts an array"));var g=Array.prototype.slice.call(a);if(0===g.length)return c([]);for(var p=g.length,l=0;g.length>l;l++)h(l,g[l])})};l.resolve=function(a){return a&&"object"==typeof a&&a.constructor===l?a:new l(function(c){c(a)})};l.reject=function(a){return new l(function(c,d){d(a)})};l.race=function(a){return new l(function(c,d){if(!a||"undefined"==typeof a.length)return d(new TypeError("Promise.race accepts an array"));
for(var h=0,g=a.length;g>h;h++)l.resolve(a[h]).then(c,d)})};l._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(d){a(d,0)};l._unhandledRejectionFn=function(a){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object");}();"Promise"in h?h.Promise.prototype["finally"]||
(h.Promise.prototype["finally"]=m):h.Promise=l});var C=J(I.sha256,I.base64js);I.Keycloak=C;"function"===typeof define&&define.amd&&define("keycloak",[],function(){return C})}})(window,function(I,J){function C(){x||(x=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function m(l){l.__proto__=w.prototype;
return l}function w(l){return m(new Promise(l))}function l(m){function t(b,a){var f;var c=window.crypto||window.msCrypto;if(c&&c.getRandomValues&&window.Uint8Array)f=new Uint8Array(b),c.getRandomValues(f);else for(f=Array(b),c=0;c<f.length;c++)f[c]=Math.floor(256*Math.random());for(var c=Array(b),u=0;u<b;u++)c[u]=a.charCodeAt(f[u]%a.length);return String.fromCharCode.apply(null,c)}function p(){if("undefined"!==typeof b.authServerUrl)return"/"==b.authServerUrl.charAt(b.authServerUrl.length-1)?b.authServerUrl+
"realms/"+encodeURIComponent(b.realm):b.authServerUrl+"/realms/"+encodeURIComponent(b.realm)}function q(a,c){function f(f,u,v,d){e=(e+(new Date).getTime())/2;h(f,u,v,e);M&&(b.tokenParsed&&b.tokenParsed.nonce!=a.storedNonce||b.refreshTokenParsed&&b.refreshTokenParsed.nonce!=a.storedNonce||b.idTokenParsed&&b.idTokenParsed.nonce!=a.storedNonce)?(F("[KEYCLOAK] Invalid nonce, clearing token"),b.clearToken(),c&&c.setError()):d&&(b.onAuthSuccess&&b.onAuthSuccess(),c&&c.setSuccess())}var u=a.code,d=a.error,
v=a.prompt,e=(new Date).getTime();a.kc_action_status&&b.onActionUpdate&&b.onActionUpdate(a.kc_action_status);if(d)"none"!=v?(u={error:d,error_description:a.error_description},b.onAuthError&&b.onAuthError(u),c&&c.setError(u)):c&&c.setSuccess();else if("standard"!=b.flow&&(a.access_token||a.id_token)&&f(a.access_token,null,a.id_token,!0),"implicit"!=b.flow&&u){var u="code\x3d"+u+"\x26grant_type\x3dauthorization_code",d=b.endpoints.token(),g=new XMLHttpRequest;g.open("POST",d,!0);g.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");u+="\x26client_id\x3d"+encodeURIComponent(b.clientId);u+="\x26redirect_uri\x3d"+a.redirectUri;a.pkceCodeVerifier&&(u+="\x26code_verifier\x3d"+a.pkceCodeVerifier);g.withCredentials=!0;g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status){var a=JSON.parse(g.responseText);f(a.access_token,a.refresh_token,a.id_token,"standard"===b.flow);C()}else b.onAuthError&&b.onAuthError(),c&&c.setError()};g.send(u)}}function a(a){function f(a){b.endpoints=a?{authorize:function(){return a.authorization_endpoint},
token:function(){return a.token_endpoint},logout:function(){if(!a.end_session_endpoint)throw"Not supported by the OIDC server";return a.end_session_endpoint},checkSessionIframe:function(){if(!a.check_session_iframe)throw"Not supported by the OIDC server";return a.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode';},userinfo:function(){if(!a.userinfo_endpoint)throw"Not supported by the OIDC server";return a.userinfo_endpoint}}:{authorize:function(){return p()+
"/protocol/openid-connect/auth"},token:function(){return p()+"/protocol/openid-connect/token"},logout:function(){return p()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var a=p()+"/protocol/openid-connect/login-status-iframe.html";b.iframeVersion&&(a=a+"?version\x3d"+b.iframeVersion);return a},register:function(){return p()+"/protocol/openid-connect/registrations"},userinfo:function(){return p()+"/protocol/openid-connect/userinfo"}}}var c=n(),d;m?"string"===typeof m&&(d=m):d="keycloak.json";
if(d){var e=new XMLHttpRequest;e.open("GET",d,!0);e.setRequestHeader("Accept","application/json");e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status||0==e.status&&e.responseText&&e.responseURL.startsWith("file:")){var a=JSON.parse(e.responseText);b.authServerUrl=a["auth-server-url"];b.realm=a.realm;b.clientId=a.resource;f(null);c.setSuccess()}else c.setError()};e.send()}else{if(!m.clientId)throw"clientId missing";b.clientId=m.clientId;if(a=m.oidcProvider)"string"===typeof a?(a="/"==
a.charAt(a.length-1)?a+".well-known/openid-configuration":a+"/.well-known/openid-configuration",e=new XMLHttpRequest,e.open("GET",a,!0),e.setRequestHeader("Accept","application/json"),e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status||0==e.status&&e.responseText&&e.responseURL.startsWith("file:")){var b=JSON.parse(e.responseText);f(b);c.setSuccess()}else c.setError()},e.send()):(f(a),c.setSuccess());else{if(!m.url)for(a=document.getElementsByTagName("script"),d=0;d<a.length;d++)if(a[d].src.match(/.*keycloak\.js/)){m.url=
a[d].src.substr(0,a[d].src.indexOf("/js/keycloak.js"));break}if(!m.realm)throw"realm missing";b.authServerUrl=m.url;b.realm=m.realm;f(null);c.setSuccess()}}return c.promise}function h(a,c,e,g){b.tokenTimeoutHandle&&(clearTimeout(b.tokenTimeoutHandle),b.tokenTimeoutHandle=null);c?(b.refreshToken=c,b.refreshTokenParsed=d(c)):(delete b.refreshToken,delete b.refreshTokenParsed);e?(b.idToken=e,b.idTokenParsed=d(e)):(delete b.idToken,delete b.idTokenParsed);if(a){if(b.token=a,b.tokenParsed=d(a),b.sessionId=
b.tokenParsed.session_state,b.authenticated=!0,b.subject=b.tokenParsed.sub,b.realmAccess=b.tokenParsed.realm_access,b.resourceAccess=b.tokenParsed.resource_access,g&&(b.timeSkew=Math.floor(g/1E3)-b.tokenParsed.iat),null!=b.timeSkew&&(F("[KEYCLOAK] Estimated time difference between browser and server is "+b.timeSkew+" seconds"),b.onTokenExpired))if(a=1E3*(b.tokenParsed.exp-(new Date).getTime()/1E3+b.timeSkew),F("[KEYCLOAK] Token expires in "+Math.round(a/1E3)+" s"),0>=a)b.onTokenExpired();else b.tokenTimeoutHandle=
setTimeout(b.onTokenExpired,a)}else delete b.token,delete b.tokenParsed,delete b.subject,delete b.realmAccess,delete b.resourceAccess,b.authenticated=!1}function d(a){a=a.split(".")[1];a=a.replace("/-/g","+");a=a.replace("/_/g","/");switch(a.length%4){case 0:break;case 2:a+="\x3d\x3d";break;case 3:a+="\x3d";break;default:throw"Invalid token";}a=(a+"\x3d\x3d\x3d").slice(0,a.length+a.length%4);a=a.replace(/-/g,"+").replace(/_/g,"/");a=decodeURIComponent(escape(atob(a)));return a=JSON.parse(a)}function c(){var a=
t(36,"0123456789abcdef").split("");a[14]="4";a[19]="0123456789abcdef".substr(a[19]&3|8,1);a[8]=a[13]=a[18]=a[23]="-";return a.join("")}function g(a){a:{var f;switch(b.flow){case "standard":f=["code","state","session_state","kc_action_status"];break;case "implicit":f="access_token token_type id_token state session_state expires_in kc_action_status".split(" ");break;case "hybrid":f="access_token id_token code state session_state kc_action_status".split(" ")}f.push("error");f.push("error_description");
f.push("error_uri");var c=a.indexOf("?"),d=a.indexOf("#"),e,v;"query"===b.responseMode&&-1!==c?(e=a.substring(0,c),v=r(a.substring(c+1,-1!==d?d:a.length),f),""!==v.paramsString&&(e+="?"+v.paramsString),-1!==d&&(e+=a.substring(d))):"fragment"===b.responseMode&&-1!==d&&(e=a.substring(0,d),v=r(a.substring(d+1),f),""!==v.paramsString&&(e+="#"+v.paramsString));if(v&&v.oauthParams)if("standard"===b.flow||"hybrid"===b.flow){if((v.oauthParams.code||v.oauthParams.error)&&v.oauthParams.state){v.oauthParams.newUrl=
e;a=v.oauthParams;break a}}else if("implicit"===b.flow&&(v.oauthParams.access_token||v.oauthParams.error)&&v.oauthParams.state){v.oauthParams.newUrl=e;a=v.oauthParams;break a}a=void 0}if(a){if(f=K.get(a.state))a.valid=!0,a.redirectUri=f.redirectUri,a.storedNonce=f.nonce,a.prompt=f.prompt,a.pkceCodeVerifier=f.pkceCodeVerifier;return a}}function r(a,b){a=a.split("\x26");for(var f={paramsString:"",oauthParams:{}},c=0;c<a.length;c++){var d=a[c].indexOf("\x3d"),e=a[c].slice(0,d);-1!==b.indexOf(e)?f.oauthParams[e]=
a[c].slice(d+1):(""!==f.paramsString&&(f.paramsString+="\x26"),f.paramsString+=a[c])}return f}function n(){var a={setSuccess:function(b){a.resolve(b)},setError:function(b){a.reject(b)}};a.promise=new w(function(b,c){a.resolve=b;a.reject=c});return a}function x(){var a=n();if(!e.enable||e.iframe)return a.setSuccess(),a.promise;var c=document.createElement("iframe");e.iframe=c;c.onload=function(){var c=b.endpoints.authorize();"/"===c.charAt(0)?(c=window.location.origin?window.location.origin:window.location.protocol+
"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),e.iframeOrigin=c):e.iframeOrigin=c.substring(0,c.indexOf("/",8));a.setSuccess()};var d=b.endpoints.checkSessionIframe();c.setAttribute("src",d);c.setAttribute("title","keycloak-session-iframe");c.style.display="none";document.body.appendChild(c);window.addEventListener("message",function(a){if(a.origin===e.iframeOrigin&&e.iframe.contentWindow===a.source&&("unchanged"==a.data||"changed"==a.data||"error"==a.data)){"unchanged"!=
a.data&&b.clearToken();for(var c=e.callbackList.splice(0,e.callbackList.length),f=c.length-1;0<=f;--f){var d=c[f];"error"==a.data?d.setError():d.setSuccess("unchanged"==a.data)}}},!1);return a.promise}function C(){e.enable&&b.token&&setTimeout(function(){D().then(function(a){a&&C()})},1E3*e.interval)}function D(){var a=n();if(e.iframe&&e.iframeOrigin){var c=b.clientId+" "+(b.sessionId?b.sessionId:"");e.callbackList.push(a);var d=e.iframeOrigin;1==e.callbackList.length&&e.iframe.contentWindow.postMessage(c,
d)}else a.setSuccess();return a.promise}function H(a){if(!a||"default"==a)return{login:function(a){window.location.replace(b.createLoginUrl(a));return n().promise},logout:function(a){window.location.replace(b.createLogoutUrl(a));return n().promise},register:function(a){window.location.replace(b.createRegisterUrl(a));return n().promise},accountManagement:function(){var a=b.createAccountUrl();if("undefined"!==typeof a)window.location.href=a;else throw"Not supported by the OIDC server";return n().promise},
redirectUri:function(a,c){1==arguments.length&&(c=!0);return a&&a.redirectUri?a.redirectUri:b.redirectUri?b.redirectUri:location.href}};if("cordova"==a){e.enable=!1;var c=function(a,b,c){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(a,b,c):window.open(a,b,c)},f=function(a){return a&&a.cordovaOptions?Object.keys(a.cordovaOptions).reduce(function(b,c){b[c]=a.cordovaOptions[c];return b},{}):{}},d=function(a){return Object.keys(a).reduce(function(b,c){b.push(c+"\x3d"+
a[c]);return b},[]).join(",")},h=function(a){var b=f(a);b.location="no";a&&"none"==a.prompt&&(b.hidden="yes");return d(b)};return{login:function(a){var f=n(),d=h(a);a=b.createLoginUrl(a);var e=c(a,"_blank",d),u=!1,v=!1;e.addEventListener("loadstart",function(a){!L&&a.url.includes("broker")&&(L=!0);0==a.url.indexOf("http://localhost")&&(a=g(a.url),q(a,f),v=!0,e.close(),u=!0)});e.addEventListener("loaderror",function(a){u||(0==a.url.indexOf("http://localhost")?(a=g(a.url),q(a,f),v=!0,e.close(),u=!0):
(f.setError(),v=!0,e.close()))});e.addEventListener("exit",function(a){v||f.setError({reason:k?"closed_by_logout":"closed_by_user"});k=!1});return f.promise},logout:function(a){var f=n();a=b.createLogoutUrl(a);var d=c(a,"_blank","location\x3dno,hidden\x3dyes"),e=!1;d.addEventListener("loadstart",function(a){0==a.url.indexOf("http://localhost")?(b.clearToken(),f.setSuccess(),d.close(),L=!1,k=e=!0):L&&d.show()});d.addEventListener("loaderror",function(a){e||(0!=a.url.indexOf("http://localhost")&&f.setError(),
d.close())});d.addEventListener("exit",function(a){});return f.promise},register:function(a){var f=n(),d=b.createRegisterUrl();a=h(a);var e=c(d,"_blank",a);e.addEventListener("loadstart",function(a){0==a.url.indexOf("http://localhost")&&(e.close(),a=g(a.url),q(a,f))});return f.promise},accountManagement:function(){var a=b.createAccountUrl();if("undefined"!==typeof a){var f=c(a,"_blank","location\x3dno");f.addEventListener("loadstart",function(a){0==a.url.indexOf("http://localhost")&&f.close()})}else throw"Not supported by the OIDC server";
},redirectUri:function(a){return"http://localhost"}}}if("cordova-native"==a)return e.enable=!1,{login:function(a){var c=n();a=b.createLoginUrl(a);universalLinks.subscribe("keycloak",function(a){universalLinks.unsubscribe("keycloak");window.cordova.plugins.browsertab.close();a=g(a.url);q(a,c)});window.cordova.plugins.browsertab.openUrl(a);return c.promise},logout:function(a){var c=n();a=b.createLogoutUrl(a);universalLinks.subscribe("keycloak",function(a){universalLinks.unsubscribe("keycloak");window.cordova.plugins.browsertab.close();
b.clearToken();c.setSuccess()});window.cordova.plugins.browsertab.openUrl(a);return c.promise},register:function(a){var c=n();a=b.createRegisterUrl(a);universalLinks.subscribe("keycloak",function(a){universalLinks.unsubscribe("keycloak");window.cordova.plugins.browsertab.close();a=g(a.url);q(a,c)});window.cordova.plugins.browsertab.openUrl(a);return c.promise},accountManagement:function(){var a=b.createAccountUrl();if("undefined"!==typeof a)window.cordova.plugins.browsertab.openUrl(a);else throw"Not supported by the OIDC server";
},redirectUri:function(a){return a&&a.redirectUri?a.redirectUri:b.redirectUri?b.redirectUri:"http://localhost"}};throw"invalid adapter type: "+a;}function A(a){return function(){b.enableLogging&&a.apply(console,Array.prototype.slice.call(arguments))}}if(!(this instanceof l))return new l(m);for(var b=this,y,z=[],K,e={enable:!0,callbackList:[],interval:5},L=!1,k=!1,G=document.getElementsByTagName("script"),E=0;E<G.length;E++)-1===G[E].src.indexOf("keycloak.js")&&-1===G[E].src.indexOf("keycloak.min.js")||
-1===G[E].src.indexOf("version\x3d")||(b.iframeVersion=G[E].src.substring(G[E].src.indexOf("version\x3d")+8).split("\x26")[0]);var M=!0,F=A(console.info),R=A(console.warn);b.init=function(c){function d(){var a=function(a){a||(d.prompt="none");b.login(d).then(function(){k.setSuccess()}).catch(function(){k.setError()})},f=function(){var a=document.createElement("iframe"),c=b.createLoginUrl({prompt:"none",redirectUri:b.silentCheckSsoRedirectUri});a.setAttribute("src",c);a.setAttribute("title","keycloak-silent-check-sso");
a.style.display="none";document.body.appendChild(a);var f=function(b){b.origin===window.location.origin&&a.contentWindow===b.source&&(b=g(b.data),q(b,k),document.body.removeChild(a),window.removeEventListener("message",f))};window.addEventListener("message",f)},d={};switch(c.onLoad){case "check-sso":e.enable?x().then(function(){D().then(function(c){c?k.setSuccess():b.silentCheckSsoRedirectUri?f():a(!1)}).catch(function(){k.setError()})}):b.silentCheckSsoRedirectUri?f():a(!1);break;case "login-required":a(!0);
break;default:throw"Invalid value for onLoad";}}b.authenticated=!1;a:{try{K=new N;break a}catch(v){}K=new O}var f=["default","cordova","cordova-native"];y=c&&-1<f.indexOf(c.adapter)?H(c.adapter):c&&"object"===typeof c.adapter?c.adapter:window.Cordova||window.cordova?H("cordova"):H();if(c){"undefined"!==typeof c.useNonce&&(M=c.useNonce);"undefined"!==typeof c.checkLoginIframe&&(e.enable=c.checkLoginIframe);c.checkLoginIframeInterval&&(e.interval=c.checkLoginIframeInterval);"login-required"===c.onLoad&&
(b.loginRequired=!0);if(c.responseMode)if("query"===c.responseMode||"fragment"===c.responseMode)b.responseMode=c.responseMode;else throw"Invalid value for responseMode";if(c.flow){switch(c.flow){case "standard":b.responseType="code";break;case "implicit":b.responseType="id_token token";break;case "hybrid":b.responseType="code id_token token";break;default:throw"Invalid value for flow";}b.flow=c.flow}null!=c.timeSkew&&(b.timeSkew=c.timeSkew);c.redirectUri&&(b.redirectUri=c.redirectUri);c.silentCheckSsoRedirectUri&&
(b.silentCheckSsoRedirectUri=c.silentCheckSsoRedirectUri);if(c.pkceMethod){if("S256"!==c.pkceMethod)throw"Invalid value for pkceMethod";b.pkceMethod=c.pkceMethod}b.enableLogging="boolean"===typeof c.enableLogging?c.enableLogging:!1}b.responseMode||(b.responseMode="fragment");b.responseType||(b.responseType="code",b.flow="standard");var l=n(),k=n();k.promise.then(function(){b.onReady&&b.onReady(b.authenticated);l.setSuccess(b.authenticated)}).catch(function(a){l.setError(a)});f=a(m);f.then(function(){var a=
g(window.location.href);a&&window.history.replaceState(window.history.state,null,a.newUrl);if(a&&a.valid)return x().then(function(){q(a,k)}).catch(function(a){k.setError()});c?c.token&&c.refreshToken?(h(c.token,c.refreshToken,c.idToken),e.enable?x().then(function(){D().then(function(a){a?(b.onAuthSuccess&&b.onAuthSuccess(),k.setSuccess(),C()):k.setSuccess()}).catch(function(){k.setError()})}):b.updateToken(-1).then(function(){b.onAuthSuccess&&b.onAuthSuccess();k.setSuccess()}).catch(function(){b.onAuthError&&
b.onAuthError();c.onLoad?d():k.setError()})):c.onLoad?d():k.setSuccess():k.setSuccess()});f.catch(function(){l.setError()});return l.promise};b.login=function(a){return y.login(a)};b.createLoginUrl=function(a){var d=c(),e=c(),f=y.redirectUri(a),g={state:d,nonce:e,redirectUri:encodeURIComponent(f)};a&&a.prompt&&(g.prompt=a.prompt);var h;h=a&&"register"==a.action?b.endpoints.register():b.endpoints.authorize();var k;k=a&&a.scope?-1!=a.scope.indexOf("openid")?a.scope:"openid "+a.scope:"openid";d=h+"?client_id\x3d"+
encodeURIComponent(b.clientId)+"\x26redirect_uri\x3d"+encodeURIComponent(f)+"\x26state\x3d"+encodeURIComponent(d)+"\x26response_mode\x3d"+encodeURIComponent(b.responseMode)+"\x26response_type\x3d"+encodeURIComponent(b.responseType)+"\x26scope\x3d"+encodeURIComponent(k);M&&(d=d+"\x26nonce\x3d"+encodeURIComponent(e));a&&a.prompt&&(d+="\x26prompt\x3d"+encodeURIComponent(a.prompt));a&&a.maxAge&&(d+="\x26max_age\x3d"+encodeURIComponent(a.maxAge));a&&a.loginHint&&(d+="\x26login_hint\x3d"+encodeURIComponent(a.loginHint));
a&&a.idpHint&&(d+="\x26kc_idp_hint\x3d"+encodeURIComponent(a.idpHint));a&&a.action&&"register"!=a.action&&(d+="\x26kc_action\x3d"+encodeURIComponent(a.action));a&&a.locale&&(d+="\x26ui_locales\x3d"+encodeURIComponent(a.locale));if(b.pkceMethod){a=t(96,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");g.pkceCodeVerifier=a;a:switch(b.pkceMethod){case "S256":a=new Uint8Array(I.arrayBuffer(a));a=J.fromByteArray(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");break a;default:throw"Invalid value for pkceMethod";
}d=d+("\x26code_challenge\x3d"+a)+("\x26code_challenge_method\x3d"+b.pkceMethod)}K.add(g);return d};b.logout=function(a){return y.logout(a)};b.createLogoutUrl=function(a){return b.endpoints.logout()+"?redirect_uri\x3d"+encodeURIComponent(y.redirectUri(a,!1))};b.register=function(a){return y.register(a)};b.createRegisterUrl=function(a){a||(a={});a.action="register";return b.createLoginUrl(a)};b.createAccountUrl=function(a){var c=p(),d=void 0;"undefined"!==typeof c&&(d=c+"/account?referrer\x3d"+encodeURIComponent(b.clientId)+
"\x26referrer_uri\x3d"+encodeURIComponent(y.redirectUri(a)));return d};b.accountManagement=function(){return y.accountManagement()};b.hasRealmRole=function(a){var c=b.realmAccess;return!!c&&0<=c.roles.indexOf(a)};b.hasResourceRole=function(a,c){if(!b.resourceAccess)return!1;c=b.resourceAccess[c||b.clientId];return!!c&&0<=c.roles.indexOf(a)};b.loadUserProfile=function(){var a=p()+"/account",c=new XMLHttpRequest;c.open("GET",a,!0);c.setRequestHeader("Accept","application/json");c.setRequestHeader("Authorization",
"bearer "+b.token);var d=n();c.onreadystatechange=function(){4==c.readyState&&(200==c.status?(b.profile=JSON.parse(c.responseText),d.setSuccess(b.profile)):d.setError())};c.send();return d.promise};b.loadUserInfo=function(){var a=b.endpoints.userinfo(),c=new XMLHttpRequest;c.open("GET",a,!0);c.setRequestHeader("Accept","application/json");c.setRequestHeader("Authorization","bearer "+b.token);var d=n();c.onreadystatechange=function(){4==c.readyState&&(200==c.status?(b.userInfo=JSON.parse(c.responseText),
d.setSuccess(b.userInfo)):d.setError())};c.send();return d.promise};b.isTokenExpired=function(a){if(!b.tokenParsed||!b.refreshToken&&"implicit"!=b.flow)throw"Not authenticated";if(null==b.timeSkew)return F("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var c=b.tokenParsed.exp-Math.ceil((new Date).getTime()/1E3)+b.timeSkew;if(a){if(isNaN(a))throw"Invalid minValidity";c-=a}return 0>c};b.updateToken=function(a){var c=n();if(!b.refreshToken)return c.setError(),c.promise;
a=a||5;var d=function(){var d=!1;if(-1==a)d=!0,F("[KEYCLOAK] Refreshing token: forced refresh");else if(!b.tokenParsed||b.isTokenExpired(a))d=!0,F("[KEYCLOAK] Refreshing token: token expired");if(d){var d="grant_type\x3drefresh_token\x26refresh_token\x3d"+b.refreshToken,e=b.endpoints.token();z.push(c);if(1==z.length){var f=new XMLHttpRequest;f.open("POST",e,!0);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.withCredentials=!0;var d=d+("\x26client_id\x3d"+encodeURIComponent(b.clientId)),
g=(new Date).getTime();f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){F("[KEYCLOAK] Token refreshed");g=(g+(new Date).getTime())/2;var a=JSON.parse(f.responseText);h(a.access_token,a.refresh_token,a.id_token,g);b.onAuthRefreshSuccess&&b.onAuthRefreshSuccess();for(a=z.pop();null!=a;a=z.pop())a.setSuccess(!0)}else for(R("[KEYCLOAK] Failed to refresh token"),400==f.status&&b.clearToken(),b.onAuthRefreshError&&b.onAuthRefreshError(),a=z.pop();null!=a;a=z.pop())a.setError(!0)};f.send(d)}}else c.setSuccess(!1)};
e.enable?D().then(function(){d()}).catch(function(){c.setError()}):d();return c.promise};b.clearToken=function(){b.token&&(h(null,null,null),b.onAuthLogout&&b.onAuthLogout(),b.loginRequired&&b.login())};var N=function(){function a(){for(var a=(new Date).getTime(),b=0;b<localStorage.length;b++){var c=localStorage.key(b);if(c&&0==c.indexOf("kc-callback-")){var d=localStorage.getItem(c);if(d)try{var e=JSON.parse(d).expires;(!e||e<a)&&localStorage.removeItem(c)}catch(S){localStorage.removeItem(c)}}}}
if(!(this instanceof N))return new N;localStorage.setItem("kc-test","test");localStorage.removeItem("kc-test");this.get=function(b){if(b){b="kc-callback-"+b;var c=localStorage.getItem(b);c&&(localStorage.removeItem(b),c=JSON.parse(c));a();return c}};this.add=function(b){a();var c="kc-callback-"+b.state;b.expires=(new Date).getTime()+36E5;localStorage.setItem(c,JSON.stringify(b))}},O=function(){if(!(this instanceof O))return new O;this.get=function(c){if(c){var d;a:{d="kc-callback-"+c+"\x3d";for(var e=
document.cookie.split(";"),g=0;g<e.length;g++){for(var f=e[g];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(d)){d=f.substring(d.length,f.length);break a}}d=""}b("kc-callback-"+c,"",a(-100));if(d)return JSON.parse(d)}};this.add=function(c){b("kc-callback-"+c.state,JSON.stringify(c),a(60))};this.removeItem=function(c){b(c,"",a(-100))};var a=function(a){var b=new Date;b.setTime(b.getTime()+6E4*a);return b},b=function(a,b,c){a=a+"\x3d"+b+"; expires\x3d"+c.toUTCString()+"; ";document.cookie=a}}}if("undefined"===
typeof Promise)throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var x=!1;w.prototype=Object.create(Promise.prototype);w.prototype.constructor=w;w.prototype.success=function(l){C();var q=this.then(function(m){l(m)});return m(q)};w.prototype.error=function(l){C();var q=this.catch(function(m){l(m)});return m(q)};return l});